@model dawazon2._0.Models.AdminUserDetailViewModel

@{
    ViewData["Title"] = "Detalle de usuario";
    var u = Model.User;
}

<div class="container my-5" style="max-width: 680px;">

    <div class="d-flex align-items-center mb-4 gap-2">
        <a href="/admin/usuarios" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-arrow-left me-1"></i>Volver
        </a>
        <h4 class="mb-0 ms-2 fw-bold">
            <i class="bi bi-person-circle me-2 text-primary"></i>Detalle de usuario
        </h4>
    </div>

    <div class="card shadow-sm border-0 rounded-4 overflow-hidden">

        <div style="background: linear-gradient(135deg, #001f5b 0%, #003087 100%); height: 80px;"></div>

        <div class="card-body px-4 pb-4 pt-0 text-center">
            <img src="~/img/defaultImg.png"
                 alt="Avatar"
                 class="rounded-circle border border-4 border-white shadow"
                 style="width: 90px; height: 90px; object-fit: cover; margin-top: -45px;">

            <h4 class="fw-bold mt-3 mb-0">
                @(string.IsNullOrWhiteSpace(u.Nombre) ? "Sin nombre" : u.Nombre)
            </h4>
            <p class="text-muted small mb-2">@u.Email</p>

            <div class="mb-3">
                @foreach (var rol in u.Roles)
                {
                    <span class="badge bg-dark text-uppercase" style="font-size: 0.7rem;">@rol</span>
                }
            </div>
        </div>

        <div class="card-body px-4 pb-4 border-top">
            <dl class="row mb-0">
                <dt class="col-sm-4 text-muted">ID</dt>
                <dd class="col-sm-8">@u.Id</dd>

                <dt class="col-sm-4 text-muted">Teléfono</dt>
                <dd class="col-sm-8">@(string.IsNullOrWhiteSpace(u.Telefono) ? "—" : u.Telefono)</dd>

                <dt class="col-sm-4 text-muted">Calle</dt>
                <dd class="col-sm-8">@(string.IsNullOrWhiteSpace(u.Calle) ? "—" : u.Calle)</dd>

                <dt class="col-sm-4 text-muted">Ciudad</dt>
                <dd class="col-sm-8">@(string.IsNullOrWhiteSpace(u.Ciudad) ? "—" : u.Ciudad)</dd>

                <dt class="col-sm-4 text-muted">CP</dt>
                <dd class="col-sm-8">@(string.IsNullOrWhiteSpace(u.CodigoPostal) ? "—" : u.CodigoPostal)</dd>

                <dt class="col-sm-4 text-muted">Provincia</dt>
                <dd class="col-sm-8">@(string.IsNullOrWhiteSpace(u.Provincia) ? "—" : u.Provincia)</dd>
            </dl>
        </div>

        <div class="card-footer bg-white border-0 px-4 pb-4 d-flex gap-2 justify-content-end">
            <a href="/admin/usuarios/@u.Id/editar" class="btn btn-warning">
                <i class="bi bi-pencil me-1"></i>Editar
            </a>

            <form action="/admin/usuarios/@u.Id/eliminar"
                  method="post"
                  onsubmit="return confirm('¿Seguro que deseas desactivar a @u.Email?')">
                @Html.AntiForgeryToken()
                <button type="submit" class="btn btn-outline-danger">
                    <i class="bi bi-person-x me-1"></i>Desactivar
                </button>
            </form>
        </div>

    </div>
</div>
